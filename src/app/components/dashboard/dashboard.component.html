<div style="background-color: rgb(234, 237, 237);">
  <button
  style="margin-top: 20px"
  class="buttonApply"
  mat-raised-button
  *ngIf="user === 'manager'"
  [routerLink]="['/addForm']"
  routerLinkActive="router-link-active"
 >
  Add Bus Data
 </button>
 <div [formGroup]="sortControlForm"   style="margin-top: 20px"
 
 >
  <mat-form-field appearance="outline" >
    <mat-label>Sort Column Chooser</mat-label>
    <mat-select
      placeholder="sortColumnControl"
      formControlName="sortColumnControl"
    >
      <mat-option
        *ngFor="let sort of sortChooser"
        matInput
        [value]="sort.value"

      >
        {{ sort.viewValue }}
      </mat-option>
    </mat-select>
  </mat-form-field>

 
  <mat-form-field appearance="outline">
    <mat-label>Sort Type Chooser</mat-label>
    <mat-select
      placeholder="sortTypeSelector"
      formControlName="sortTypeControl"
    >
      <mat-option
        *ngFor="let sort of sortTypeChooser"
        matInput
        [value]="sort.value"
      >
        {{ sort.viewValue }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <button
    mat-raised-button
   class="buttonApply"
    (click)="onSort(sortControlForm.value)"
    [disabled]="sortControlForm.invalid"
  >
    Apply Sort
  </button>
</div> 

<!-- <mat-slide-toggle [(ngModel)]="show">
  <input type="checkbox" name="myData"  />
  serviceNo
</mat-slide-toggle> -->
<mat-form-field appearance="outline" color="primary">
  <mat-label><span color="accent">choose columns</span> </mat-label>
  <mat-select
    [formControl]="displayColumnControl"
    (selectionChange)="onColumnSelect($event)"
    multiple
    class="select"
  >
  <!-- <mat-option>
    selectAll
  </mat-option> -->
    <mat-option
      *ngFor="let column of columns"
      (onSelect)="onColumnSelect($event)"
      [value]="column"
      >{{ column }}
    </mat-option>
  </mat-select>
</mat-form-field>
<button mat-raised-button (click)="selectAll()" *ngIf="backButton">
Select All
</button>
<button  mat-raised-button style="background-color: #e6545b;margin-left: 20px;" [routerLink]="['grid-view']" routerLinkActive="router-link-active" >
  <mat-icon>grid_on</mat-icon>

</button>

</div>
<div class="table-class"  >
  <table mat-table [dataSource]="busList" class="mat-elevation-z8" fxFlex="25" fxFlex.sm="30" fxFlex.xs="50">
  

    <ng-container matColumnDef="busId">
      <th mat-header-cell *matHeaderCellDef>Id</th>
      <td mat-cell *matCellDef="let bus">{{ bus.busId }}</td>
    </ng-container>

    <ng-container matColumnDef="busServiceNum">
      <th mat-header-cell *matHeaderCellDef>serviceNo</th>
      <td mat-cell *matCellDef="let bus">
        {{ bus.busServiceNum }}
      </td>
    </ng-container>

    <ng-container matColumnDef="busPlateNum">
      <th mat-header-cell *matHeaderCellDef>Plate no</th>
      <td mat-cell *matCellDef="let bus">
        {{ bus.busPlateNum }}
      </td>
    </ng-container>
    <ng-container matColumnDef="busType">
      <th mat-header-cell *matHeaderCellDef>busType</th>
      <td mat-cell *matCellDef="let bus">{{ bus.busType }}</td>
    </ng-container>

    <ng-container matColumnDef="busServiceType">
      <th mat-header-cell *matHeaderCellDef>busServiceType</th>
      <td mat-cell *matCellDef="let bus">{{ bus.busServiceType }}</td>
    </ng-container>
    <ng-container matColumnDef="busCapacity">
      <th mat-header-cell *matHeaderCellDef>busCapacity</th>
      <td mat-cell *matCellDef="let bus">{{ bus.busCapacity }}</td>
    </ng-container>
    <ng-container matColumnDef="startingPoint">
      <th mat-header-cell *matHeaderCellDef>startingPoint</th>
      <td mat-cell *matCellDef="let bus">{{ bus.startingPoint }}</td>
    </ng-container>
    <ng-container matColumnDef="destination">
      <th mat-header-cell *matHeaderCellDef>destination</th>
      <td mat-cell *matCellDef="let bus">{{ bus.destination }}</td>
    </ng-container>
    <ng-container matColumnDef="busStops">
      <th mat-header-cell *matHeaderCellDef>busStops</th>
      <td mat-cell *matCellDef="let bus">{{ bus.busStops }}</td>
    </ng-container>
    <ng-container matColumnDef="busDuration">
      <th mat-header-cell *matHeaderCellDef>busDuration</th>
      <td mat-cell *matCellDef="let bus">{{ bus.busDuration }}</td>
    </ng-container>
    <ng-container matColumnDef="scheduleDepartureDateTime">
      <th mat-header-cell *matHeaderCellDef>scheduleDepartureDateTime</th>
      <td mat-cell *matCellDef="let bus">
        {{ bus.scheduleDepartureDateTime | date : "short" : "UTC" }}
      </td>
    </ng-container>
    <ng-container matColumnDef="scheduleArrivalDateTime">
      <th mat-header-cell *matHeaderCellDef>scheduleArrivalDateTime</th>
      <td mat-cell *matCellDef="let bus">
        {{ bus.scheduleArrivalDateTime | date : "short" : "UTC" }}
      </td>
    </ng-container>
    <ng-container matColumnDef="estimatedArrivalDateTime">
      <th mat-header-cell *matHeaderCellDef>estimatedArrivalDateTime</th>
      <td mat-cell *matCellDef="let bus">
        {{ bus.estimatedArrivalDateTime | date : "short" : "UTC" }}
      </td>
    </ng-container>
    <ng-container matColumnDef="fareAmount">
      <th mat-header-cell *matHeaderCellDef>fareAmount</th>
      <td mat-cell *matCellDef="let bus">
        {{ bus.fareAmount | currency : "INR" }}
      </td>
    </ng-container>
    <ng-container matColumnDef="fareTax">
      <th mat-header-cell *matHeaderCellDef>fareTax</th>
      <td mat-cell *matCellDef="let bus">
        {{ bus.fareTax | currency : "INR" }}
      </td>
    </ng-container>
    <ng-container matColumnDef="totalFare">
      <th mat-header-cell *matHeaderCellDef>totalFare</th>
      <td mat-cell *matCellDef="let bus">
        {{ bus.totalFare | currency : "INR" }}
      </td>
    </ng-container>
    <ng-container matColumnDef="flexiTicket">
      <th mat-header-cell *matHeaderCellDef>flexiTicket</th>
      <td mat-cell *matCellDef="let bus">{{ bus.flexiTicket }}</td>
    </ng-container>
    <ng-container matColumnDef="movieEnabled">
      <th mat-header-cell *matHeaderCellDef>movieEnabled</th>
      <td mat-cell *matCellDef="let bus">{{ bus.movieEnabled }}</td>
    </ng-container>
    <ng-container matColumnDef="rating">
      <th mat-header-cell *matHeaderCellDef>rating</th>
      <td mat-cell *matCellDef="let bus">{{ bus.rating }}</td>
    </ng-container>
    <ng-container matColumnDef="runningStatus">
      <th mat-header-cell *matHeaderCellDef>runningStatus</th>
      <td mat-cell *matCellDef="let bus">{{ bus.runningStatus }}</td>
    </ng-container>
    <ng-container matColumnDef="editBusData">
      <th mat-header-cell *matHeaderCellDef>
        {{ user === "manager" || user === "editor" ? "Edit" : "" }}
      </th>
      <td mat-cell *matCellDef="let bus">
        <a
          [routerLink]="['editForm', bus.busId]"
          routerLinkActive="router-link-active"
          *ngIf="user === 'manager' || user === 'editor'"
        >
          <mat-icon>edit</mat-icon>
        </a>
        <!-- <button mat-icon-button color="primary" [routerLink]="['editForm',bus.busId]" routerLinkActive="router-link-active" [hidden]="user==='viewer'">
          <mat-icon>edit</mat-icon>
          <a ></a>
        </button> -->
      </td>
    </ng-container>
    <ng-container matColumnDef="deleteBusData">
      <th mat-header-cell *matHeaderCellDef >
        Delete
        <!-- {{ user === "manager" || user === "editor" ? "Delete" : "" }} -->
      </th>
      <td mat-cell *matCellDef="let bus">
        <!-- <a [routerLink]="['deleteBus',bus.busId]" routerLinkActive="router-link-active" *ngIf="user==='manager'||user==='editor'">
          <mat-icon>delete</mat-icon>
        </a> -->
        <button
          mat-icon-button
          type="button"
          color="primary"
          *ngIf="user === 'manager' || user === 'editor'"
          (click)="onDelete(bus.busId)"
        >
          <mat-icon >delete</mat-icon>
        </button>
      </td> 
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
     
      (click)="showDetails($event,row)"
    ></tr>
  </table>
</div>
<div>
  <mat-paginator
    [length]="documentCount"
    [pageSize]="3"
    [pageSizeOptions]="[1, 2, 3, 5, 10]"
    (page)="onChangePage($event)"
    aria-label="Select page"
  >
  </mat-paginator>
</div>
  



<!-- <mat-toolbar color="primary">
  <span>Card view demo</span>
  <button mat-button (click)="toggleGridColumns()" fxHide.lt-md>
    <span *ngIf="gridColumns === 4">Three Columns</span>
    <span *ngIf="gridColumns === 3">Four Columns</span>
  </button>
</mat-toolbar> -->

<!-- <div class="content">
  <div fxLayout="row wrap" fxLayoutGap="16px grid">
    <div [fxFlex]="(100/gridColumns) + '%'" fxFlex.xs="100%" fxFlex.sm="33%" >
      <mat-card class="mat-elevation-z4" *ngFor="let bus of busList">
        <mat-card-header>
          <mat-card-title>Mountains </mat-card-title>
        </mat-card-header>
        <img mat-card-image src="./../assets/images/mountains.jpg">
        <p >
          The Himalayas is a mountain range in Asia.
        </p>
        <mat-card-content>
          {{bus|json}}

        </mat-card-content>
        <mat-card-actions>
          <button mat-button>LIKE</button>
          <button mat-button>SHARE</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div> -->
<!-- <mat-grid-list cols="2" rowHeight="2:1" *ngFor="let bus of busList">
  <mat-grid-tile>{{bus|json}}</mat-grid-tile>
  <mat-grid-tile>{{bus|json}}</mat-grid-tile>
  
</mat-grid-list> -->
<!-- <button id="add-bus" type="submit" mat-raised-button color="primary" [routerLink]="['/add']" routerLinkActive="router-link-active">
  Add Bus
</button> -->

<!-- <router-outlet></router-outlet> -->

<!-- <button
    *ngIf="user === 'manager' || user === 'editor'"
    (click)="isShown = !isShown"
    mat-raised-button
    color="accent"
  >
    {{ isShown === false ? "Add" : "Hide Add" }} Form
  </button> -->
